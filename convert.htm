<!DOCTYPE html>
<html lang="en">
 
<head>
<meta charset="utf-8"/>

<title>Converter</title>
<script type="text/javascript">
function Convert()
{
    var text = document.conv.input.value;

    // Search for big blind
    // big blind [$2.00 USD]
    var bbregex = /(big blind \[\$)(\d+[\.\d+]*)(.*)/;
    var matches = text.split("\n").join(" ").match(bbregex);
    if(matches == null)
    {
        console.warning("Big blind not found. Leaving text as it is");
        return;
    }

    var fbblind = parseFloat(matches[2].replace(",",".")); 

    // Convert
    var regex = /(.*)(\$)(\d+[\.\d+]*)( +.*)/;
    var text = document.conv.input.value;
    var inputtext = text.split("\n");

    for(i = 0; i < inputtext.length; i++)
    {
        matches = inputtext[i].match(regex);
        while(matches != null)
        {
            var fval = parseFloat(matches[3].replace(",",".")); 
            inputtext[i] = matches[1] + "+" + (fval / fbblind).toFixed(2) + matches[4];
            matches = inputtext[i].match(regex);
        }
        inputtext[i] = inputtext[i].replace("+", "$")
    }

    document.conv.output.value = inputtext.join("\n");
}


</script>

</head>

<body>
<h1>Converter</h1>
<form name="conv">
<button type="button" onclick="Convert()">Convert</button><br>

<table>
<tr>
	<td>Input</td> <td>Output</td>
</tr>
<tr>
	<td>
		<textarea name="input" rows="30" cols="90"></textarea> 
	</td>
	<td>
		<textarea name="output" rows="30" cols="90"></textarea> 
	</td>
</tr>
</table>
</form>


</body>
</html>
